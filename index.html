<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stan's reReCAPTCHA</title>
    
    <!-- React & ReactDOM (Development versions for easy debugging, switch to production for live sites if preferred) -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    
    <!-- Babel for translating JSX in the browser -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Tailwind CSS for styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600&display=swap" rel="stylesheet">

    <style>
        .ease-spring {
            transition-timing-function: cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        @keyframes cry {
            0% { top: 65px; }
            100% { top: 80px; }
        }
        .animate-cry {
            animation: cry 1s infinite alternate;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useRef, useEffect } = React;

        function App() {
            const [state, setState] = useState('idle'); // 'idle', 'happy', 'sad', 'confused'
            const [inputText, setInputText] = useState('');
            const inputRef = useRef(null);

            // Keywords that make Stan sad (insults about hair/appearance)
            const sadWords = ['hair', 'bald', 'ugly', 'bad', 'stupid', 'dumb', 'hate', 'gross', 'no', 'robot', 'fake', 'awful', 'trash', 'smelly', 'horrible', 'crap'];
            
            // Keywords that make Stan happy (compliments)
            const happyWords = ['kind','cool', 'nice', 'love', 'handsome', 'smart', 'good', 'best', 'great', 'wow', 'smile', 'pretty', 'beautiful', 'like', 'awesome', 'human', 'amazing', 'wonderful'];

            const tellStan = () => {
                const text = inputText.toLowerCase();
                
                const isSad = sadWords.some(word => text.includes(word));
                const isHappy = happyWords.some(word => text.includes(word));

                if (isSad) {
                    setState('sad');
                } else if (isHappy) {
                    setState('happy');
                } else {
                    // Unrecognized input -> Confused
                    setState('confused'); 
                }
            };

            const handleKeyDown = (e) => {
                if (e.key === 'Enter') {
                    tellStan();
                }
            };

            return (
                <div className="min-h-screen bg-[#f0f2f5] flex items-center justify-center font-sans selection:bg-[#5dade2] selection:text-white">
                {/* Container */}
                <div className="bg-white p-10 rounded-[20px] shadow-[0_10px_25px_rgba(0,0,0,0.1)] flex flex-col items-center w-[450px]" style={{ fontFamily: "Arial, sans-serif" }}>
                    
                    {/* --- STAN --- */}
                    <div className={`relative w-[140px] h-[220px] mb-2 transition-all duration-300 ${state}`}>
                    
                    {/* Hair */}
                    <div className="absolute -top-[15px] left-1/2 -translate-x-1/2 w-[20px] h-[25px] bg-[#333] rounded-t-[50%] z-[3] before:absolute before:bottom-0 before:-left-[5px] before:w-[10px] before:h-[10px] before:bg-[#333] before:rounded-full" />

                    {/* Eyebrows - Behind glasses (z-4) */}
                    {/* Left Eyebrow: Raised high when confused */}
                    <div 
                        className={`absolute top-[28px] left-[36px] w-[25px] h-[5px] bg-[#333] z-[4] rounded-full transition-transform duration-300 
                        ${state === 'happy' ? '-translate-y-1 rotate-[-5deg]' 
                            : state === 'sad' ? 'rotate-[-15deg] translate-y-1' 
                            : state === 'confused' ? '-translate-y-2 rotate-[-20deg]' 
                            : ''}
                        `} 
                    />
                    {/* Right Eyebrow: Stays low/flat when confused for contrast */}
                    <div 
                        className={`absolute top-[28px] right-[36px] w-[25px] h-[5px] bg-[#333] z-[4] rounded-full transition-transform duration-300 
                        ${state === 'happy' ? '-translate-y-1 rotate-[5deg]' 
                            : state === 'sad' ? 'rotate-[15deg] translate-y-1' 
                            : state === 'confused' ? 'translate-y-0 rotate-[0deg]' 
                            : ''}
                        `} 
                    />

                    {/* Sunglasses (z-5) */}
                    <div className="absolute top-[35px] left-1/2 -translate-x-1/2 w-[80px] h-[35px] z-[5] flex justify-center">
                        <div className="w-[40px] h-full border-[5px] border-black border-r-[2.5px] bg-transparent rounded-b-[12px]" />
                        <div className="w-[40px] h-full border-[5px] border-black border-l-[2.5px] bg-transparent rounded-b-[12px]" />
                        <div className="absolute top-0 left-0 w-full h-[5px] bg-black" />
                    </div>

                    {/* Ears */}
                    <div className="absolute top-[50px] w-[20px] h-[25px] bg-[#eebb99] rounded-full z-[1] left-[10px]" />
                    <div className="absolute top-[50px] w-[20px] h-[25px] bg-[#eebb99] rounded-full z-[1] right-[10px]" />

                    {/* Head */}
                    <div className="relative w-[100px] h-[110px] bg-[#eebb99] rounded-[50px_50px_20px_20px] mx-auto z-[2]">
                        
                        {/* Eyes */}
                        <div className="absolute top-[40px] left-[19px] w-[28px] h-[22px] bg-white rounded-b-[15px] z-[4] overflow-hidden flex justify-center items-center">
                        <div className={`w-[10px] h-[10px] bg-black rounded-full transition-transform duration-300 translate-y-[-2px] ${state === 'sad' ? 'translate-y-[2px]' : ''}`} />
                        </div>
                        <div className="absolute top-[40px] right-[19px] w-[28px] h-[22px] bg-white rounded-b-[15px] z-[4] overflow-hidden flex justify-center items-center">
                        <div className={`w-[10px] h-[10px] bg-black rounded-full transition-transform duration-300 translate-y-[-2px] ${state === 'sad' ? 'translate-y-[2px]' : ''}`} />
                        </div>

                        {/* Nose */}
                        <div className="absolute top-[75px] left-1/2 -translate-x-1/2 w-[12px] h-[12px] bg-[#daa07e] rounded-full" />
                        
                        {/* Mouth - Confused: Small crooked line */}
                        <div 
                        className={`absolute left-1/2 -translate-x-1/2 transition-all duration-300
                            ${state === 'happy' 
                            ? 'w-[30px] h-[20px] bg-transparent border-b-[4px] border-[#333] rounded-b-full bottom-[13px]' 
                            : state === 'sad'
                                ? 'w-[30px] h-[20px] bg-transparent border-t-[4px] border-[#333] rounded-t-full bottom-[4px]'
                                : state === 'confused'
                                ? 'w-[20px] h-[4px] bg-[#333] rounded-[2px] bottom-[16px] -rotate-6'
                                : 'w-[30px] h-[4px] bg-[#333] rounded-[2px] bottom-[16px]'
                            }
                        `} 
                        />

                        {/* Tears */}
                        <div className={`absolute top-[70px] left-[25px] w-[4px] bg-[#5dade2] rounded-full transition-all duration-700 ease-in ${state === 'sad' ? 'h-[40px] opacity-100' : 'h-0 opacity-0'}`} />
                        <div className={`absolute top-[70px] right-[25px] w-[4px] bg-[#5dade2] rounded-full transition-all duration-700 ease-in ${state === 'sad' ? 'h-[40px] opacity-100' : 'h-0 opacity-0'}`} />
                    </div>

                    {/* Shirt */}
                    <div className="relative w-[100px] h-[70px] bg-black -mt-[10px] mx-auto rounded-[10px_10px_0_0] z-[3]">
                        <div className="absolute -top-[5px] left-1/2 -translate-x-1/2 w-[30px] h-[10px] bg-[#eebb99] z-[4]" />
                        <div 
                        className={`absolute top-[5px] -right-[15px] w-[25px] h-[80px] bg-black rounded-[10px] origin-top-center transition-all duration-500 ease-spring
                            ${state === 'idle' ? 'opacity-0 rotate-0' : 'opacity-100'}
                            ${state === 'happy' ? 'rotate-[-140deg]' : ''}
                            ${state === 'sad' ? 'rotate-[-20deg]' : ''}
                            ${state === 'confused' ? 'rotate-[-140deg]' : ''} /* Holding up the question mark */
                        `}
                        >
                        <div className="absolute -bottom-[10px] left-0 w-[25px] h-[25px] bg-[#eebb99] rounded-full">
                            <div 
                            className={`absolute -top-[40px] -left-[10px] w-[40px] h-[40px] transition-all duration-300 delay-200
                                ${state !== 'idle' ? 'opacity-100 scale-100' : 'opacity-0 scale-0'}
                                ${state === 'happy' || state === 'confused' ? 'rotate-[140deg]' : 'rotate-[20deg]'}
                            `}
                            >
                            {state === 'happy' && (
                                <svg viewBox="0 0 512 512" className="w-full h-full fill-[#2ecc71] drop-shadow-sm">
                                <path d="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM369 209L241 337c-9.4 9.4-24.6 9.4-33.9 0l-64-64c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0l47 47L335 175c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9z"/>
                                </svg>
                            )}
                            {state === 'sad' && (
                                <svg viewBox="0 0 512 512" className="w-full h-full fill-[#e74c3c] drop-shadow-sm">
                                <path d="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM175 175c9.4-9.4 24.6-9.4 33.9 0l47 47 47-47c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9l-47 47 47 47c9.4 9.4 9.4 24.6 0 33.9s-24.6 9.4-33.9 0l-47-47-47 47c-9.4 9.4-24.6 9.4-33.9 0s-9.4-24.6 0-33.9l47-47-47-47c-9.4-9.4-9.4-24.6 0-33.9z"/>
                                </svg>
                            )}
                            {state === 'confused' && (
                                <svg viewBox="0 0 512 512" className="w-full h-full fill-[#95a5a6] drop-shadow-sm">
                                <path d="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM216 336h24V272c0-8.8 7.2-16 16-16h16c8.8 0 16-7.2 16-16v-16c0-17.7-14.3-32-32-32h-16c-17.7 0-32 14.3-32 32v16h-24v-16c0-30.9 25.1-56 56-56h16c30.9 0 56 25.1 56 56v16c0 22.1-17.9 40-40 40h-16c-8.8 0-16 7.2-16 16v64h-24v-64zm40 128h-24v-24h24v24z" transform="scale(1.5) translate(-85,-85)"/>
                                {/* Using a simpler circle-question equivalent manually for robustness */}
                                <circle cx="256" cy="256" r="256" fill="#95a5a6"/>
                                <path d="M241 128h30c33.1 0 60 26.9 60 60 0 18.2-8.3 34.5-21.3 45.4-12.3 10.3-19.7 25.8-19.7 42.6v10h-48v-14c0-29.9 13.6-56.7 35.1-73.6 5-3.9 8.2-10 8.2-16.7 0-12.1-9.9-22-22-22h-22c-12.1 0-22 9.9-22 22v14h-48v-18c0-33.1 26.9-60 60-60zm16 256c13.3 0 24-10.7 24-24s-10.7-24-24-24-24 10.7-24 24 10.7 24 24 24z" fill="white" transform="translate(13, 20) scale(0.9)"/>
                                </svg>
                            )}
                            </div>
                        </div>
                        </div>
                    </div>

                    {/* Pants */}
                    <div className="w-[100px] h-[40px] bg-[#2980b9] mx-auto rounded-[0_0_20px_20px] z-[2]">
                        <div className="w-full h-[8px] bg-[#95a5a6]" />
                    </div>

                    </div>

                    {/* --- PROMPT --- */}
                    <div 
                    className="font-semibold mb-[20px] mt-[10px] text-center text-[#333] text-[19px] leading-tight tracking-tight"
                    style={{ fontFamily: "'Montserrat', sans-serif" }}
                    >
                    Prove you're a human. Make Stan smile.
                    </div>

                    {/* --- CONTROLS --- */}
                    <div className="flex gap-[10px] items-center w-full relative">
                    <input 
                        ref={inputRef}
                        type="text" 
                        placeholder="Say something nice..." 
                        autoComplete="off"
                        value={inputText}
                        onChange={(e) => setInputText(e.target.value)}
                        onKeyDown={handleKeyDown}
                        className="flex-1 p-[6px_15px] border-[2px] border-[#ddd] rounded-[8px] outline-none transition-colors focus:border-[#3498db]"
                    />
                    <div className="absolute -bottom-[20px] left-0 text-[10px] text-[#888]">reReCAPTCHA</div>
                    <button 
                        onClick={tellStan}
                        className="bg-[#5dade2] text-white p-[6px_20px] rounded-[8px] cursor-pointer font-semibold select-none transition-transform active:scale-95 hover:bg-[#3498db] whitespace-nowrap"
                    >
                        Tell Stan
                    </button>
                    </div>

                </div>

                {/* No extra style tag needed here as we used CDN and internal <style> in head */}
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
